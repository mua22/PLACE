package epclaim.centralsystem;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;

import JSHOP2Wrapper.JShop2Planner;
import epclaim.compiler.Environment;
import epclaim.compiler.PlaceObjectCollection;
import epclaim.compiler.grammar.ParseException;
import epclaim.compiler.grammar.PlaceGrammar;
import epclaim.planner.IPlanner;

public class CentralSystem {
	private Environment env;
	private IPlanner planner;
	private PlaceObjectCollection objects;
	private PlaceGrammar parser;
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		CentralSystem cs = new CentralSystem(new JShop2Planner());
		String fileName = "F:\\epclaimcodes\\shop2\\casestudyHospital\\hospital.ep";
		try {
			cs.compile(fileName);
		} catch (FileNotFoundException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (ParseException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}
	
	public CentralSystem(IPlanner planner){
		this.planner = planner;
		objects = new PlaceObjectCollection();
	}
	public void compile(String fileName) throws FileNotFoundException, ParseException{
		System.out.println("Starting Compiling ...");
		FileReader stream = new FileReader(new File(fileName));
		parser = new PlaceGrammar(stream);
		objects = parser.compile();
		System.out.println("Finished Compiling ...");
	}
}
