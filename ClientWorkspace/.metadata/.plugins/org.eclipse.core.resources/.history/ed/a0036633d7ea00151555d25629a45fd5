package epclaim.compiler;

import java.util.ArrayList;

import epclaim.utils.CommonStringUtils;

public class Agent {
	private String agentName;
	private KnowledgeCollection knowledgeCollection;
	private KnowledgeCollection goalCollection;
	private Environment environment;
	private String agent_in="";
	public String getAgentName() {
		return agentName;
	}

	public void setAgentName(String agentName) {
		this.agentName = agentName;
	}

	public String getAgent_in() {
		return agent_in;
	}

	public void setAgent_in(String agent_in) {
		this.agent_in = agent_in;
	}

	public ActionCollection getActionCollection() {
		for(Action action:this.environment.getActions().getActions())
			this.actionCollection.add(action);
		return actionCollection;
	}

	public ActivityCollection getActivityCollection() {
		return activityCollection;
	}

	private ActionCollection actionCollection;
	private ActivityCollection activityCollection;
	public KnowledgeCollection getKnowledgeCollection() {
		if(this.knowledgeCollection==null)
			this.knowledgeCollection = new KnowledgeCollection();
		ArrayList<String> params = new ArrayList<String>();
		params.add(this.agent_in);
		Knowledge agent_inKnowledge = new Knowledge("agentIn",params);
		
		this.knowledgeCollection.add(agent_inKnowledge);
		KnowledgeCollection environmentKnowledge = this.environment.getGlobalKnowledgeCollection();
		
		return this.knowledgeCollection.mergeKnowledgeCollection(environmentKnowledge);
	}

	public Environment getEnvironment() {
		return environment;
	}

	public void setEnvironment(Environment environment) {
		this.environment = environment;
	}

	public KnowledgeCollection getGoalCollection() {
		if(this.goalCollection==null)
			return new KnowledgeCollection();
		return goalCollection;
	}

	public void setGoalCollection(KnowledgeCollection goalCollection) {
		this.goalCollection = goalCollection;
	}

	public void setKnowledgeCollection(KnowledgeCollection knowledgeCollection) {
		this.knowledgeCollection = knowledgeCollection;
	}
	
	public void setActionCollection(ActionCollection actionCollection) {
		this.actionCollection = actionCollection;
	}
	public void setActivityCollection(ActivityCollection activityCollection) {
		this.activityCollection = activityCollection;
	}
	public String getName() {
		return agentName;
	}

	public void setName(String name) {
		this.agentName = name;
	}

	public Agent(String agentName) {
		super();
		this.agentName = agentName;
		this.actionCollection = new ActionCollection();
		this.activityCollection = new ActivityCollection();
		this.knowledgeCollection = new KnowledgeCollection();
	}

	@Override
	public String toString() {
		String str=CommonStringUtils.CurlyBraceOpen(true);
		//str+= "knowledge=" + knowledgeCollection;
		//str+="actions="+actionCollection;
		str+="activities="+activityCollection;
		str+=CommonStringUtils.CurlyBraceClose(true);
		return str;
		//return "Agent [agentName=" + agentName+"\n Knowledge =" + knowledgeCollection+"\nActions = " + actionCollection;
	}
	
}
